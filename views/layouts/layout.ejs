<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>

    <!-- ê³µí†µ CSS -->
     <link rel="stylesheet" href="/css/common.css">
     <script src="/js/common.js"></script>

     <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.4/kakao.min.js"
     integrity="sha384-DKYJZ8NLiK8MN4/C5P2dtSmLQ4KwPaoqAfyA/DfmEc1VDxu4yyC7wy6K1Hs90nka" 
     crossorigin="anonymous"></script>

     <script>
        document.addEventListener("DOMContentLoaded", function () {
           // console.log("ğŸš€ DOMì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.");
            if (window.Kakao && !Kakao.isInitialized()) {
                Kakao.init('4a2a51c4104deceb54f805eb34bc4f3d');
                console.log("Kakao SDK ì´ˆê¸°í™” ì™„ë£Œ:", Kakao.isInitialized());
            }
        });

        window.env = {
            kakao_redirect_uri: "<%= kakao_redirect_uri %>",
            login_user:JSON.parse('<%- JSON.stringify(user) %>'),
            api_base_url: "<%= api_base_url %>"
        };

    </script>

    <%- typeof css !== "undefined" ? css : "" %>
     <!-- <%- css %> -->
</head>
<body>
    <header>
        <!-- ì œëª© ì •í•´ì•¼í•¨ -->
        <h1><a href="/" style="text-decoration: none; color: inherit;">ê°€ì•¼ í•  ì§€ë„</a></h1> 

        <% if (typeof currentPage !== 'undefined' && (currentPage === 'yummymap' || currentPage === '/')) { %>
            <div class="header-search-container">
                <input type="text" id="headerSearchInput" placeholder="ğŸ” ê²€ìƒ‰í•  ê°€ê²Œëª…ì„ ì…ë ¥í•˜ì„¸ìš”!">
                <button class="header-search-button" onclick="filterStoreList()">ê²€ìƒ‰</button>
            </div>
         <% } %>
        
        <!-- ë¡œê·¸ì¸ ì²˜ë¦¬ ì ì‹œ ë§‰ì•„ë‘  -->
        <div class="hamburger-menu" onclick="toggleSidebar()">â˜°</div>
    </header>

    <div class="sidebar" id="sidebar">
        <span class="close-btn" onclick="toggleSidebar()">âœ–</span>
        <ul>
            <% if (typeof user !== 'undefined' && user) { %>
                <li>
                    <img  src="<%= user.picture %>" alt="í”„ë¡œí•„" class="profile-img">
                    <p><strong ><%= user.name %></strong></p>
                </li>
                <!-- <li><a href="#">ë‚´ ì •ë³´</a></li>
                <li><a href="#">ì„¤ì •</a></li> -->
                <li><a href="#" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</a></li>

                <% if (user.is_admin) { %>
                    <li><a href="/admin">ê´€ë¦¬ì í˜ì´ì§€</a></li>
                <% } %>

            <% } else { %>
                <li><a href="/login" class="login-button">ë¡œê·¸ì¸</a></li>
            <% } %>

            <!-- <li><a href="#" class="">ì¤€ë¹„ ì¤‘</a></li> -->
        </ul>
    </div>
    
    <main>
        <%- body %> <!-- í˜ì´ì§€ë³„ ì»¨í…ì¸  ì‚½ì… -->
    </main>

    <footer>
        <p class="copyright">Â© 2025 Yummy ğŸ« ì´ˆì½”ì†¡ì´ê°€ ë§Œë“¤ì—ˆì–´ìš”! ğŸ„</p>
        <p><a href="">support@yummymap.com</a></p>
    </footer>
    <%- typeof script !== "undefined" ? script : "" %> 
</body>
</html>
